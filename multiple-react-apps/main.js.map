{"version":3,"file":"main.js","mappings":"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","sources":["webpack://shell/./node_modules/glaze-ui/dist/base-router.js","webpack://shell/./node_modules/glaze-ui/dist/glaze-react.js","webpack://shell/./node_modules/glaze-ui/dist/glaze.js","webpack://shell/./node_modules/glaze-ui/dist/index.js","webpack://shell/./node_modules/glaze-ui/dist/jsx.js","webpack://shell/./node_modules/glaze-ui/dist/pipeline.js","webpack://shell/./node_modules/glaze-ui/dist/router.js","webpack://shell/webpack/bootstrap","webpack://shell/./src/index.jsx"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RouterBase = void 0;\nconst log = (message) => {\n    console.log(`%c[Router]%c ${message}`, 'color: rgb(255, 105, 100);', 'color: inherit');\n};\n/**\n * Router\n */\nclass RouterBase {\n    /**\n     * Creates an instance of Router.\n     */\n    constructor(options) {\n        this.routes = [];\n        this.routes = [];\n        this.options = Object.assign({\n            debug: false,\n        }, options);\n        this.always(() => null);\n        this._listener = () => this._onLocationChange(false);\n        this._subscribe();\n        this.resolve();\n        window.addEventListener('DOMContentLoaded', this._listener);\n    }\n    /**\n     * Dispose router\n     */\n    dispose() {\n        this._prevState = null;\n        this._prevUrl = null;\n        this._unsubscribe();\n    }\n    /**\n     * Sync current route with router\n     * !NB: Use it after external location or history change\n     */\n    applyState() {\n        this._saveState(document.location.pathname, history.state);\n        return this._onLocationChange(true);\n    }\n    /**\n     * Push route state to history stack\n     */\n    pushState(url = '/', state = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!state.reverted) {\n                this._saveState(document.location.pathname, history.state);\n            }\n            if (url !== location.pathname) {\n                history.pushState(state, document.title, url);\n            }\n            else {\n                history.replaceState(state, document.title, url);\n            }\n            if (this._resolving) {\n                return Promise.resolve(false);\n            }\n            return yield this._onLocationChange();\n        });\n    }\n    /**\n     * Pop state from history stack\n     */\n    popState() {\n        history.back();\n    }\n    /**\n     * Replace current url to new with state\n     */\n    replaceState(url = '/', state = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            history.replaceState(state, document.title, url);\n            return yield this._onLocationChange();\n        });\n    }\n    /**\n     * Resolve route\n     */\n    resolve(handler = () => Promise.resolve(true)) {\n        this._resolver = handler;\n        return this;\n    }\n    /**\n     * Attach route with handler\n     */\n    on(route, handler) {\n        this.routes.push({\n            route,\n            handler,\n        });\n        return this;\n    }\n    /**\n     *  Default route fallback\n     */\n    default(handler) {\n        this.routes.push({\n            route: '',\n            handler,\n        });\n        return this;\n    }\n    /**\n     * Every route change callback\n     */\n    always(func) {\n        this.alwaysFunc = func;\n        return this;\n    }\n    /**\n     * Parse route by regexp or route mask\n     */\n    _getRouteParser(route) {\n        const paramNames = [];\n        let regexp;\n        if (route instanceof RegExp) {\n            regexp = route;\n        }\n        else {\n            const expression = route\n                .replace(/([:*])(\\w+)/g, (full, dots, name) => {\n                paramNames.push(name);\n                return '([^/]+)';\n            })\n                .replace(/\\*/g, '(?:.*)');\n            regexp = new RegExp(`/${expression}(?:/$|$)/`);\n        }\n        return {\n            paramNames,\n            regexp,\n        };\n    }\n    /**\n     * Collect route params from matches founded in route path\n     */\n    _collectRouteParams(match, paramNames) {\n        return match.slice(1, match.length).reduce((params, value, index) => {\n            params[paramNames[index]] = decodeURIComponent(value);\n            return params;\n        }, {});\n    }\n    /**\n     * Location change callback\n     */\n    _onLocationChange(applied) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const path = decodeURI(location.pathname);\n            if (this.options.debug) {\n                log(`pushChange, ${path}`);\n            }\n            yield this._resolveLocation(path, history.state, applied);\n            // // Resolve already in progress\n            // if (this._resolving) {\n            //     return this._resolving;\n            // }\n            // this._resolving = this._resolver(this._prevUrl, path).then((result) => {\n            //     if (result) {\n            //         this._resolving = null;\n            //         return this._resolveLocation(path, history.state, applied);\n            //     } else {\n            //         return this._revertState().then(() => {\n            //             this._resolving = null;\n            //             return result;\n            //         });\n            //     }\n            // });\n            // return this._resolving;\n        });\n    }\n    /**\n     * Revert state to previous saved\n     */\n    _revertState() {\n        // First loaded state\n        if (!this._prevUrl) {\n            this.popState();\n            return Promise.resolve(true);\n        }\n        // remove forward button\n        return this.pushState(this._prevUrl, Object.assign(Object.assign({}, this._prevState), { reverted: true }));\n    }\n    /**\n     * Resolve location\n     */\n    _resolveLocation(path, state, applied) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._handleRoutes(path, state, applied);\n            this._saveState(path, state);\n            yield this.alwaysFunc(path, state);\n            return Promise.resolve(true);\n        });\n    }\n    /**\n     * Apply routes handler to current route\n     */\n    _handleRoutes(path, state, applied) {\n        for (let i = 0; i < this.routes.length; i++) {\n            const parser = this._getRouteParser(this.routes[i].route);\n            const match = path.match(parser.regexp);\n            if (match) {\n                const params = this._collectRouteParams(match, parser.paramNames);\n                this.routes[i].handler.call(null, {\n                    path,\n                    state,\n                    params,\n                    applied,\n                });\n                break;\n            }\n        }\n    }\n    /**\n     * Subscribe browser events\n     */\n    _subscribe() {\n        if (!this._subscribed) {\n            window.addEventListener('popstate', this._listener);\n            this._subscribed = true;\n        }\n    }\n    /**\n     * Unsubscribe browser popstate\n     */\n    _unsubscribe() {\n        if (this._subscribed) {\n            window.removeEventListener('popstate', this._listener);\n            this._subscribed = false;\n        }\n    }\n    /**\n     * Save last handled state of route\n     */\n    _saveState(url, state) {\n        this._prevUrl = url;\n        this._prevState = state;\n    }\n}\nexports.RouterBase = RouterBase;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.glazeReact = void 0;\nconst mount = (component, react, reactDOM, hot) => (container, props) => {\n    const div = document.createElement('div');\n    div.setAttribute('glaze', 'react-app-wrapper');\n    container.appendChild(div);\n    if (hot)\n        hot(props, div);\n    const el = react.createElement(component, props);\n    reactDOM.render(el, div);\n    return div;\n};\nconst unmount = (reactDOM) => (container, app) => {\n    reactDOM.unmountComponentAtNode(app);\n    container.removeChild(app);\n};\nfunction glazeReact(component, react, reactDOM, hot) {\n    return {\n        mount: mount(component, react, reactDOM, hot),\n        unmount: unmount(reactDOM)\n    };\n}\nexports.glazeReact = glazeReact;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bootstrap = exports.app = exports.createApps = exports.App = exports.blankApp = void 0;\nclass Glaze {\n    constructor() {\n        this.readyToDispatch = null;\n        this.readyToDispatchResolver = null;\n        this.observers = [];\n        this.readyToDispatch = new Promise(resolve => {\n            this.readyToDispatchResolver = resolve;\n        });\n        this.log = (message, ...optionalParams) => {\n            if (this.options.debug)\n                console.log('[glaze]', message, ...optionalParams);\n        };\n    }\n    setOptions(options) {\n        this.options = Object.assign({ debug: false }, options);\n    }\n    start(container, resolve, router, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!router)\n                return resolve(this);\n            this.router = router;\n            yield router.start(container, options);\n            resolve(this);\n            this.readyToDispatchResolver();\n        });\n    }\n    getLazyDispatch(ready = Promise.resolve()) {\n        return message => {\n            ready.then(() => {\n                this.observers.forEach(observer => {\n                    observer(message);\n                });\n            });\n        };\n    }\n    dispatch(message) {\n        this.log('[glaze send]', message);\n        this.readyToDispatch.then(() => {\n            this.observers.forEach(observer => {\n                observer(message);\n            });\n        });\n    }\n    subscribe(observer) {\n        this.observers.push(observer);\n        return {\n            unsubscribe: () => {\n                this.removeItem(this.observers, observer);\n            }\n        };\n    }\n    removeItem(arr, value) {\n        const index = arr.indexOf(value);\n        if (index > -1) {\n            arr.splice(index, 1);\n        }\n        return arr;\n    }\n}\nconst glaze = new Glaze();\nclass Apps {\n    constructor(...apps) {\n        apps.forEach(app => {\n            if (this[app.name])\n                throw new Error(`App ${app.name} already exists`);\n            this[app.name] = app;\n        });\n    }\n}\nexports.blankApp = {\n    mount: () => { },\n    unmount: () => { },\n};\nclass App {\n    constructor(name, bootstrap) {\n        this.name = name;\n        this.bootstrap = bootstrap;\n    }\n    ;\n    mount(container, props, ready) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.checkInstance();\n            var dispatch = glaze.getLazyDispatch(ready);\n            return this.instance.mount(container, Object.assign(Object.assign({}, props), { name: this.name, glaze, dispatch }));\n        });\n    }\n    unmount(container, app) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.instance.unmount(container, app);\n        });\n    }\n    checkInstance() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.instance)\n                return this.instance;\n            if (typeof this.bootstrap === 'string') {\n                this.bootstrap = yield System.import(`@glaze/${this.name}`);\n            }\n            else if (typeof this.bootstrap === 'function') {\n                this.bootstrap = this.bootstrap();\n            }\n            else {\n                this.bootstrap = this.bootstrap;\n            }\n            if (this.bootstrap instanceof Promise)\n                this.bootstrap = yield this.bootstrap;\n            this.instance = this.bootstrap;\n        });\n    }\n}\nexports.App = App;\nfunction createApps(apps) {\n    return new Apps(...apps);\n}\nexports.createApps = createApps;\nfunction app(name, bootstrap) {\n    return new App(name, bootstrap);\n}\nexports.app = app;\nfunction bootstrap(config) {\n    const { container, apps, router, sharedLibs, options } = config;\n    if (!container)\n        throw new Error('Container is required');\n    glaze.setOptions(options);\n    return new Promise((resolve, reject) => {\n        var headEl = document.getElementsByTagName('head')[0];\n        var bodyEl = document.getElementsByTagName('body')[0];\n        var add = (tag, elName, opts, child) => tag.appendChild(Object.keys(opts).reduce((el, attr) => el.setAttribute(attr, opts[attr]) || el, document.createElement(elName))).append(child || \"\");\n        add(headEl, 'meta', { name: 'importmap-type', content: 'systemjs-importmap' });\n        add(headEl, 'script', { type: 'systemjs-importmap' }, JSON.stringify({\n            \"imports\": Object.assign(Object.assign({}, sharedLibs), Object.keys(apps)\n                .filter(key => typeof apps[key].bootstrap === 'string')\n                .reduce((obj, key) => (Object.assign(Object.assign({}, obj), { [`@glaze/${apps[key].name}`]: apps[key].bootstrap || \"#\" })), {}))\n        }));\n        add(headEl, 'script', { src: 'https://cdn.jsdelivr.net/npm/systemjs@6.8.3/dist/system.min.js' });\n        add(headEl, 'script', { src: 'https://cdn.jsdelivr.net/npm/import-map-overrides@2.2.0/dist/import-map-overrides.js' });\n        add(bodyEl, 'import-map-overrides-full', { \"show-when-local-storage\": \"devtools\", \"dev-libs\": \"\" });\n        const pageLoaded = () => __awaiter(this, void 0, void 0, function* () {\n            window.removeEventListener('load', pageLoaded);\n            try {\n                yield glaze.start(container, resolve, router, options);\n                glaze.log('Framework started');\n            }\n            catch (e) {\n                reject(e);\n            }\n        });\n        window.addEventListener('load', pageLoaded);\n    });\n}\nexports.bootstrap = bootstrap;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createElement = exports.glazeReact = exports.defaultRoute = exports.route = exports.createLayout = exports.createRoutes = exports.blankApp = exports.app = exports.bootstrap = exports.createApps = void 0;\nvar glaze_1 = require(\"./glaze\");\nObject.defineProperty(exports, \"createApps\", { enumerable: true, get: function () { return glaze_1.createApps; } });\nObject.defineProperty(exports, \"bootstrap\", { enumerable: true, get: function () { return glaze_1.bootstrap; } });\nObject.defineProperty(exports, \"app\", { enumerable: true, get: function () { return glaze_1.app; } });\nObject.defineProperty(exports, \"blankApp\", { enumerable: true, get: function () { return glaze_1.blankApp; } });\nvar router_1 = require(\"./router\");\nObject.defineProperty(exports, \"createRoutes\", { enumerable: true, get: function () { return router_1.createRoutes; } });\nObject.defineProperty(exports, \"createLayout\", { enumerable: true, get: function () { return router_1.createLayout; } });\nObject.defineProperty(exports, \"route\", { enumerable: true, get: function () { return router_1.route; } });\nObject.defineProperty(exports, \"defaultRoute\", { enumerable: true, get: function () { return router_1.defaultRoute; } });\nvar glaze_react_1 = require(\"./glaze-react\");\nObject.defineProperty(exports, \"glazeReact\", { enumerable: true, get: function () { return glaze_react_1.glazeReact; } });\nvar jsx_1 = require(\"./jsx\");\nObject.defineProperty(exports, \"createElement\", { enumerable: true, get: function () { return jsx_1.createElement; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createElement = void 0;\nconst createElement = (tag, props, ...children) => {\n    if (typeof tag === \"function\")\n        return tag(props, ...children);\n    const element = document.createElement(tag);\n    Object.entries(props || {}).forEach(([name, value]) => {\n        if (name.startsWith(\"on\") && name.toLowerCase() in window)\n            element.addEventListener(name.toLowerCase().substr(2), value);\n        else {\n            if (name === \"className\")\n                name = \"class\";\n            element.setAttribute(name, value.toString());\n        }\n    });\n    children.forEach(child => {\n        appendChild(element, child);\n    });\n    return element;\n};\nexports.createElement = createElement;\nconst appendChild = (parent, child) => {\n    if (Array.isArray(child))\n        child.forEach(nestedChild => appendChild(parent, nestedChild));\n    else\n        parent.appendChild(child.nodeType ? child : document.createTextNode(child));\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pipeline = void 0;\nfunction Pipeline(...middlewares) {\n    const stack = middlewares;\n    const push = (...middlewares) => {\n        stack.push(...middlewares);\n    };\n    const execute = (context) => __awaiter(this, void 0, void 0, function* () {\n        let prevIndex = -1;\n        const runner = (index) => __awaiter(this, void 0, void 0, function* () {\n            if (index === prevIndex) {\n                throw new Error('next() called multiple times');\n            }\n            prevIndex = index;\n            const middleware = stack[index];\n            if (middleware) {\n                yield middleware.executor(context, () => {\n                    return runner(index + 1);\n                });\n            }\n        });\n        yield runner(0);\n    });\n    return { push, execute };\n}\nexports.Pipeline = Pipeline;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultRoute = exports.route = exports.createLayout = exports.createRoutes = exports.Layout = exports.Router = exports.Route = void 0;\nconst base_router_1 = require(\"./base-router\");\nconst pipeline_1 = require(\"./pipeline\");\nconst glaze_1 = require(\"./glaze\");\nclass Route {\n    constructor(path, appOrLayout, requestHander) {\n        this.path = path;\n        this.requestHander = requestHander;\n        if (typeof appOrLayout === 'function') {\n            this.requestHander = appOrLayout;\n            this.layout = null;\n            return;\n        }\n        if (appOrLayout instanceof glaze_1.App) {\n            const app = document.createElement('div');\n            app.setAttribute('id', appOrLayout.name);\n            app.setAttribute('glaze', 'layout-auto-generated');\n            this.layout = (0, exports.createLayout)(app, { [appOrLayout.name]: appOrLayout });\n        }\n        else {\n            this.layout = appOrLayout;\n        }\n    }\n}\nexports.Route = Route;\nclass Router {\n    constructor(middlewares) {\n        this.routeChangeStack = [];\n        this.cancelPrevRouteChange = false;\n        this.router = new base_router_1.RouterBase();\n        this.pipeline = (0, pipeline_1.Pipeline)(...middlewares);\n    }\n    addBaseUrl(path) {\n        var _a;\n        if (path.startsWith((_a = this.baseUrl) !== null && _a !== void 0 ? _a : '/')) {\n            return path;\n        }\n        return this.baseUrl + path;\n    }\n    navigate(path, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            path = this.addBaseUrl(path);\n            return yield this.router.pushState(path, state);\n        });\n    }\n    start(container, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve) => __awaiter(this, void 0, void 0, function* () {\n                this.baseUrl = (options === null || options === void 0 ? void 0 : options.baseUrl) || '';\n                this.baseUrl.endsWith('/') ? this.baseUrl.substring(this.baseUrl.length - 1) : this.baseUrl;\n                this.router.always((path, querystring) => __awaiter(this, void 0, void 0, function* () {\n                    yield this.onRouteChange(container)(path, querystring);\n                    resolve();\n                }));\n                // push initial route\n                yield this.navigate(location.pathname, location.search);\n            }));\n        });\n    }\n    forward() {\n        window.history.forward();\n    }\n    back() {\n        this.router.popState();\n    }\n    injectRouterInLinks() {\n        [...document.getElementsByTagName(\"a\")].forEach(a => {\n            if (a.onclick && a.onclick.name !== 'noop')\n                return;\n            a.onclick = (e) => __awaiter(this, void 0, void 0, function* () {\n                var route = e.currentTarget.pathname;\n                e.preventDefault();\n                yield this.navigate(route);\n            });\n        });\n    }\n    onRouteChange(container) {\n        const func = (cancelPrevRouteChange, shouldCancelThisRoute) => (path, querystring) => __awaiter(this, void 0, void 0, function* () {\n            path = path.replace(this.baseUrl, '');\n            const urlSearchParams = new URLSearchParams(querystring);\n            const state = querystring ? Object.fromEntries(urlSearchParams.entries()) : {};\n            var context = { path, state, matches: [] };\n            yield this.pipeline.execute(context);\n            if (shouldCancelThisRoute())\n                return;\n            context.matches.sort((a, b) => (a.score > b.score) ? -1 : ((b.score > a.score) ? 1 : 0));\n            const match = context.matches[0];\n            const { layout } = match;\n            // unload previous layout\n            if (this.prevLayout) {\n                yield this.prevLayout.unmount(container);\n                this.prevLayout = null;\n            }\n            // load new layout\n            if (layout) {\n                // cancel previous route change\n                cancelPrevRouteChange();\n                yield layout.mount(container);\n                this.prevLayout = layout;\n                this.routeChangeStack = [];\n                this.injectRouterInLinks();\n            }\n        });\n        return new RouteChange(this.routeChangeStack, func).run;\n    }\n}\nexports.Router = Router;\nclass RouteChange {\n    constructor(routeChangeStack, func) {\n        this.routeChangeStack = routeChangeStack;\n        this.func = func;\n        this.cancelRoute = false;\n        this.run = this.func(() => {\n            // cancel previous route change\n            while (this.routeChangeStack.length > 1) {\n                const routeChange = this.routeChangeStack.shift();\n                routeChange.cancel();\n            }\n        }, () => this.cancelRoute);\n        routeChangeStack.push(this);\n    }\n    cancel() {\n        this.cancelRoute = true;\n    }\n}\nclass Layout {\n    constructor(template, apps) {\n        this.template = template;\n        this.apps = apps;\n    }\n    mount(container) {\n        return __awaiter(this, void 0, void 0, function* () {\n            container.appendChild(this.template);\n            var appsToLoad = [];\n            var readyResolver;\n            const ready = new Promise(resolve => {\n                readyResolver = resolve;\n            });\n            for (let key in this.apps) {\n                const app = this.apps[key];\n                if (!app)\n                    throw new Error(`App ${key} not found`);\n                const el = container.querySelector(`#${key}`);\n                if (!el)\n                    throw new Error(`Div ${key} not found in layout template`);\n                appsToLoad.push(app.mount(el, this.template, ready));\n            }\n            var renderedApps = yield Promise.all(appsToLoad);\n            const keys = this.apps ? Object.keys(this.apps) : [];\n            renderedApps.map((renderedApp, index) => this.apps[keys[index]].renderedApp = renderedApp);\n            setTimeout(() => readyResolver(), 10); //TODO: get back to this\n        });\n    }\n    unmount(container) {\n        return __awaiter(this, void 0, void 0, function* () {\n            var appsToUnload = [];\n            for (let key in this.apps) {\n                const app = this.apps[key];\n                const el = container.querySelector(`#${key}`);\n                appsToUnload.push(app.unmount(el, app.renderedApp));\n            }\n            yield Promise.all(appsToUnload);\n            this.apps ? Object.keys(this.apps).forEach(key => delete this.apps[key].renderedApp) : null;\n            container.removeChild(this.template);\n        });\n    }\n}\nexports.Layout = Layout;\nconst createRoutes = (middlewares) => {\n    var newMiddlewares = middlewares.map(middleware => (typeof middleware === 'function' ? { name: 'custom', executor: middleware } : middleware));\n    // check for single default route\n    if (newMiddlewares.filter(m => m.type === 'defaultRoute').length > 1)\n        throw new Error('Only one default route is allowed');\n    // move default route to the end\n    const defaultRouteIndex = newMiddlewares.findIndex(m => m.type === 'defaultRoute');\n    if (defaultRouteIndex !== -1) {\n        const defaultRoute = newMiddlewares.splice(defaultRouteIndex, 1)[0];\n        newMiddlewares.push(defaultRoute);\n    }\n    return new Router(newMiddlewares);\n};\nexports.createRoutes = createRoutes;\nconst createLayout = (template, apps) => {\n    return new Layout(template, apps);\n};\nexports.createLayout = createLayout;\nconst mapAppToLayout = (appOrLayout) => {\n    var layout;\n    if (appOrLayout instanceof glaze_1.App) {\n        const app = document.createElement('div');\n        app.setAttribute('id', appOrLayout.name);\n        app.setAttribute('glaze', 'layout-auto-generated');\n        layout = (0, exports.createLayout)(app, { [appOrLayout.name]: appOrLayout });\n    }\n    else {\n        layout = appOrLayout;\n    }\n    return layout;\n};\nconst route = (path, appOrLayout) => {\n    return {\n        type: 'route',\n        executor: (ctx, next) => {\n            const layout = mapAppToLayout(appOrLayout);\n            if (path === '/' && ctx.path === '/') {\n                ctx.matches.push({ score: 100, layout });\n            }\n            else {\n                if (path.substring(1) && ctx.path.toLocaleLowerCase().substring(1).startsWith(path.toLocaleLowerCase().substring(1))) {\n                    ctx.matches.push({\n                        score: path.length,\n                        layout\n                    });\n                }\n            }\n            next();\n        }\n    };\n};\nexports.route = route;\nconst defaultRoute = (appOrLayout) => {\n    return {\n        type: 'defaultRoute',\n        executor: (ctx, next) => {\n            if (ctx.matches.length > 0)\n                return next();\n            const layout = mapAppToLayout(appOrLayout);\n            ctx.matches.push({\n                score: 100,\n                layout\n            });\n            next();\n        }\n    };\n};\nexports.defaultRoute = defaultRoute;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/** @jsx createElement */\nimport { \n    bootstrap, \n    createApps, app, blankApp,\n    createRoutes, route, defaultRoute,\n    createLayout, createElement\n} from 'glaze-ui';\n\n// urls injected by webpack\nconst apps = createApps([\n    app('navbar', NAVBAR_URL),\n    app('todo', TODO_URL),\n    app('footer', FOOTER_URL),\n    app('login', LOGIN_URL),\n]);\n\n\n\nconst mainLayout = (template, contentApp) => createLayout(\n    <div className='layout'>\n        <div id=\"navbar\" />\n        <div className=\"content-outer\">\n            <div id=\"content\">\n                {template}\n            </div>\n        </div>\n        <div id=\"footer\" />\n    </div>\n, {\n    navbar: apps['navbar'],\n    content: contentApp,\n    footer: apps['footer'],\n});\n\nconst loginLayout = createLayout(\n    <div className='outer'>\n        <div className=\"outer\">\n            <div className=\"inner\">\n                <div id=\"login\" />\n            </div>\n        </div>\n    </div>,\n    {\n        login: apps['login']\n    }\n);\n\nconst notFoundTemplate = (\n    <div className='outer'>\n        <div className=\"outer\">\n            <div className=\"inner\">\n                <h1>404 Page Not Found</h1>\n            </div>\n        </div>\n    </div>\n);\n\nconst authMiddleware = async (ctx, next) => {\n    if (ctx.path.startsWith('/login')) return next();\n\n    if (ctx.path.startsWith('/logout')) {\n        localStorage.removeItem('token');\n        return await router.navigate('/login');\n    }\n\n    if (ctx.path.startsWith('/auth')) {\n        const { token } = ctx.state;\n\n        localStorage.setItem('token', token);\n        return await router.navigate('/');\n    }\n\n    if (!localStorage.getItem('token')) return await router.navigate('/login');\n\n    next();\n  };\n\nconst router = createRoutes([\n    authMiddleware,\n    route('/', mainLayout('', apps['todo'])),\n    route('/login', loginLayout),\n    defaultRoute(\n        mainLayout(notFoundTemplate, blankApp)\n    )], \n    {\n        baseUrl: IS_DEV ? '' : '/glaze-ui-examples/multiple-react-apps',\n    }\n);\n\n\nbootstrap({\n    container: document.getElementById('root'),\n    apps,\n    router,\n    sharedLibs: {\n        'react': 'https://unpkg.com/react@17.0.2/umd/react.development.js',\n        'react-dom': 'https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js',\n    },\n    options: { debug: true }\n}).then(async glaze => {\n    // example on how to send a message to a glaze app\n    glaze.dispatch({test: \"message\"});\n}).catch(console.error);"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","RouterBase","constructor","options","routes","assign","debug","always","_listener","_onLocationChange","_subscribe","window","addEventListener","dispose","_prevState","_prevUrl","_unsubscribe","applyState","_saveState","document","location","pathname","history","state","pushState","url","reverted","title","replaceState","_resolving","popState","back","handler","_resolver","on","route","push","default","func","alwaysFunc","_getRouteParser","paramNames","regexp","RegExp","expression","replace","full","dots","name","_collectRouteParams","match","slice","length","reduce","params","index","decodeURIComponent","applied","path","decodeURI","message","console","log","_resolveLocation","_revertState","_handleRoutes","i","parser","call","_subscribed","removeEventListener","glazeReact","mount","component","react","reactDOM","hot","container","props","div","createElement","setAttribute","appendChild","el","render","unmount","app","unmountComponentAtNode","removeChild","bootstrap","createApps","App","blankApp","glaze","readyToDispatch","readyToDispatchResolver","observers","optionalParams","setOptions","start","router","getLazyDispatch","ready","forEach","observer","dispatch","subscribe","unsubscribe","removeItem","arr","indexOf","splice","Apps","apps","Error","checkInstance","instance","System","import","config","sharedLibs","headEl","getElementsByTagName","bodyEl","add","tag","elName","opts","child","keys","attr","append","content","type","JSON","stringify","filter","key","obj","src","pageLoaded","glaze_1","enumerable","get","router_1","createRoutes","createLayout","defaultRoute","jsx_1","children","element","entries","startsWith","toLowerCase","substr","toString","parent","Array","isArray","nestedChild","nodeType","createTextNode","Pipeline","middlewares","stack","execute","context","prevIndex","runner","middleware","executor","Layout","Router","Route","base_router_1","pipeline_1","appOrLayout","requestHander","layout","routeChangeStack","cancelPrevRouteChange","pipeline","addBaseUrl","_a","baseUrl","navigate","endsWith","substring","querystring","onRouteChange","search","forward","injectRouterInLinks","a","onclick","currentTarget","preventDefault","RouteChange","shouldCancelThisRoute","urlSearchParams","URLSearchParams","fromEntries","matches","sort","b","score","prevLayout","run","cancelRoute","shift","cancel","template","readyResolver","appsToLoad","querySelector","renderedApps","all","map","renderedApp","setTimeout","appsToUnload","newMiddlewares","m","defaultRouteIndex","findIndex","mapAppToLayout","ctx","toLocaleLowerCase","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","NAVBAR_URL","TODO_URL","FOOTER_URL","LOGIN_URL","mainLayout","contentApp","className","id","navbar","footer","loginLayout","login","notFoundTemplate","async","localStorage","token","setItem","getItem","getElementById","test","catch","error"],"sourceRoot":""}